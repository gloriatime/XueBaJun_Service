<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	<mapper namespace="com.xuebajun.mapper.CourseMapper">
		<insert id="add" parameterType="Course">
			insert into t_course(name) values(#{name});
		</insert>
		
		
		<delete id="delete" parameterType="Course">
			delete from t_course where Id=#{Id};
		</delete>
		
		<select id="getById" parameterType="Course" resultType="Course">
			select * from t_course where Id=#{Id}
		</select>
		
		<!-- 搜索课程功能：得到课程列表 -->
	    <select id="searchCourseList" parameterType="Course" resultType="Course">
	    	select *
	    	from t_course 
	    	where name like '%${name}%' or intro like '%${name}%'
	    </select>
	    
	   <!-- 推荐系统：得到近一周热度第一 -->
	    <select id="getTopOne" parameterType="TopDate" resultType="Course">
	    	select course.Id,course.name,count(*)
			from t_course as course, t_comment as comment
			where date between #{begin} and #{end} and belong = course.Id and type='‘course’';
	    </select>
	    <select id="getLastOne" resultType="Course">
			select Id,name from t_course order by Id DESC limit 1
	    </select>
	    
	    
	</mapper>